/**
 * VKeyboard - Virtual Onscreen Keyboard
 * Focused for browser-based devices that doens't have a onscreen keyboard.
 * 
 * Licensed under MIT
 * Author: EduardoPlayss121
 * Version: 1.0.0
 */

function injectStyle() {
    if (document.getElementById("vk-style")) return;
    const style = document.createElement("style");
    style.id = "vk-style";
    style.textContent = `
        .vk {
          background: #e0e0e0;
          border: 2px solid #999;
          padding: 10px;
          display: inline-block;
          border-radius: 8px;
          font-family: 'Verdana', sans-serif;
          box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }
        .vk-row {
          display: flex;
          margin: 5px 0;
          justify-content: center;
        }
        .vk-btn {
          background: linear-gradient(to bottom, #f8f8f8, #c8c8c8);
          border: 1px solid #666;
          border-radius: 4px;
          margin: 2px;
          padding: 10px 12px;
          min-width: 40px;
          text-align: center;
          font-size: 14px;
          color: #222;
          box-shadow: inset -1px -1px 0px #fff, inset 1px 1px 0px #aaa;
          cursor: pointer;
          transition: background 0.1s;
        }
        .vk-btn:active {
          background: #a0a0a0;
          box-shadow: inset 2px 2px 4px #000;
        }`;
    document.head.appendChild(style);
}

class VKeyboard{constructor({target,input,numpad=!1,func=!1,arrows=!1,sides=!1}){injectStyle(),this.container=document.getElementById(target),this.input=document.querySelector(input),this.shift=!1,this.doneBtn=!1,this.keys=[],this.map=["1234567890".split(""),"qwertyuiop".split(""),"asdfghjklç".split(""),"zxcvbnm".split("")],this.symbols={1:"!",2:"@",3:"#",4:"$",5:"%",6:"¨",7:"&",8:"*",9:"(",0:")"},this.numpad=numpad,this.func=func,this.arrows=arrows,this.sides=sides,this.draw()}draw(){this.container.innerHTML="",this.kb=document.createElement("div"),this.kb.className="vk",this.container.appendChild(this.kb),this.func&&this.addRow(["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrtScr","ScrollLock","Pause"]),this.map.forEach((r,i)=>{let row=[...r];i==0&&(this.sides&&row.unshift("`")),i==1&&(this.sides&&row.unshift("Tab")),i==2&&(this.sides&&row.unshift("Caps")),i==3&&(this.sides&&row.unshift("Shift")),this.addRow(row)}),this.sides&&this.addRow(["Ctrl","Win","Alt","Space","AltGr","Win","Ctrl","RShift"]),this.arrows&&this.addRow(["←","↑","↓","→"]),this.numpad&&this.addRow(["7","8","9","4","5","6","1","2","3","0",".","Enter"]),this.addRow(["Backspace","Enter"]),this.update()}addRow(keys){let row=document.createElement("div");row.className="vk-row",keys.forEach(k=>{let b=document.createElement("button");b.className="vk-btn",b.innerText=k,b.onclick=()=>this.press(k),row.appendChild(b)}),this.kb.appendChild(row)}press(k){let i=this.input;if(["Shift","RShift"].includes(k))return this.shift=!this.shift,this.update();if(k=="Caps")return this.shift=!this.shift,this.update();if(k=="Backspace")return i.value=i.value.slice(0,-1);if(k=="Space")return i.value+=" ";if(k=="Tab")return i.value+="\t";if(k=="Enter")return i.value+="\n";if(k=="Alt"||k=="AltGr"||k=="Ctrl"||k=="Win"||k=="PrtScr"||k=="ScrollLock"||k=="Pause")return;if(this.symbols[k]&&this.shift)return i.value+=this.symbols[k];i.value+=this.shift?k.toUpperCase():k.toLowerCase()}update(){this.kb.querySelectorAll(".vk-btn").forEach(b=>{let k=b.innerText;if(k.length==1&&/[a-z0-9]/i.test(k))b.innerText=this.shift?(this.symbols[k]||k.toUpperCase()):k.toLowerCase()})}destroy(){this.container.innerHTML=""}}
